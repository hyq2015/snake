$(function(){function n(){$('<span class="food"></span>').css({position:"absolute",left:10*Math.floor(90*Math.random())+"px",top:10*Math.floor(50*Math.random())+"px"}).appendTo($(".container"))}function e(n,e){n==parseInt($(".food").css("left"))&&e==parseInt($(".food").css("top"))&&($("span").remove(".food"),c[0][0]==c[1][0]?parseInt(c[0][1])-parseInt(c[1][1])>0?$('<div class="snake"></div>').css({left:c[0][0],top:parseInt(c[0][1])+10+"px"}).prependTo($(".container")):$('<div class="snake"></div>').css({left:c[0][0],top:parseInt(c[0][1])-10+"px"}).prependTo($(".container")):c[0][1]==c[1][1]&&(c[0][0]-c[1][0]>0?$('<div class="snake"></div>').css({left:parseInt(c[0][0])+10+"px",top:c[0][1]}).prependTo($(".container")):$('<div class="snake"></div>').css({left:parseInt(c[0][0])-10+"px",top:c[0][1]}).prependTo($(".container"))))}function t(t,d){i+=1,i%80==0&&(i=0,$("span").remove(".food"),n()),p=[],c=[],p.push($(".snake"));for(var l=p[0].length-1;l>=0;l--)c.unshift([$(p[0][l]).css("left"),$(p[0][l]).css("top")]);$(p[0][p[0].length-1]).attr("direction",t);for(var f=p[0].length-1;f>=0;f--)f==p[0].length-1?(s=parseInt($(p[0][f]).css("left")),a=parseInt($(p[0][f]).css("top")),e(s,a),"right"==t?s>=880?($(p[0][f]).css("left","890px"),r=!0):$(p[0][f]).css("left",s+d):"left"==t?10>=s?($(p[0][f]).css("left",0),r=!0):$(p[0][f]).css("left",s-d):"top"==t?10>=a?($(p[0][f]).css("top",0),r=!0):$(p[0][f]).css("top",a-d):"bottom"==t&&(a>=480?($(p[0][f]).css("top","490px"),r=!0):$(p[0][f]).css("top",a+d))):f>=0&&f<p[0].length-1&&($(p[0][f]).css("top",c[f+1][1]),$(p[0][f]).css("left",c[f+1][0]));1==r&&(window.clearInterval(o),$('<div class="gameOver">Game Over 继续【Y】/退出【N】</div>').appendTo($(".container")),window.onkeydown=function(n){var e=n||window.event;89==e.keyCode?window.location.reload():78==e.keyCode&&window.close()})}var o,s=0,a=0,r=!1,i=0,c=[],p=[],d=!1;o=window.setInterval(function(){t("bottom",10)},50),window.onkeydown=function(n){window.clearInterval(o);var e=n||window.event;32==e.keyCode&&(0==d?(window.clearInterval(o),d=!0):1==d&&(d=!1,o=window.setInterval(function(){t($(p[0][p[0].length-1]).attr("direction"),10)},50))),0==r&&(38==e.keyCode?o=window.setInterval(function(){t("top",10)},50):39==e.keyCode?o=window.setInterval(function(){t("right",10)},50):40==e.keyCode?o=window.setInterval(function(){t("bottom",10)},50):37==e.keyCode&&(o=window.setInterval(function(){t("left",10)},50)))}});